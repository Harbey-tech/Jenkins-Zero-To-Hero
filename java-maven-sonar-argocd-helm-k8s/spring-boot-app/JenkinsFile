pipeline {
  agent {
    docker {
      image 'harbey271/myapp-java17:latest'
      // Override entrypoint to prevent immediate container exit
      args '--entrypoint="" -u root -v /var/run/docker.sock:/var/run/docker.sock'
    }
  }

  environment {
    SONAR_URL = 'http://<your-sonarqube-host>:9000'
  }

  stages {
    stage('Checkout Source') {
      steps {
        checkout scm
